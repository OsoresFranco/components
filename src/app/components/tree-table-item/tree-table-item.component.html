<div class="tree-table-item">
  <ng-template #template>
    <ng-container *ngFor="let item of data; let i = index">
      <tr style="height: 50px">
        <td *ngFor="let key of keyDefinitions">
          {{ item[key] }}
        </td>
        <ng-container *ngIf="item.children?.length">
          <td>
            <button (click)="expandToggle(item)">
              {{ isExpanded(item) ? "-" : "+" }}
            </button>
          </td>
        </ng-container>
      </tr>
      <ng-container *ngIf="isExpanded(item)">
        <ng-container *ngFor="let child of item.children">
          <tr>
            <td *ngFor="let childKey of keyDefinitions">
              {{ child[childKey] }}
            </td>
            <ng-container *ngIf="child.children?.length">
              <td>
                <button (click)="test()">QUE?</button>
              </td>
            </ng-container>
          </tr>
          <ng-container *ngIf="sublevels">
            <tr>
              <td *ngFor="let subLevel of child.children">WAAAA</td>
            </tr>
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-template>
</div>
